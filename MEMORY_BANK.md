# Memory Bank: בניית Document DB ב-Rust

מסמך זה מתעד את ההתקדמות, המושגים שנלמדו, וההחלטות העיצוביות שהתקבלו במהלך בניית מסד נתונים מבוסס מסמכים ב-Rust.

## מושגי מפתח שנלמדו ויושמו בהצלחה

1.  **ניהול פרויקט עם Cargo**:
    *   יצירת פרויקט חדש (`cargo new`).
    *   קומפילציה והרצה (`cargo run`).
    *   שימוש בקומפיילר ככלי עזר לאיתור ותיקון שגיאות.

2.  **מבני נתונים בסיסיים**:
    *   הגדרת `struct` כדי לייצג את המצב של מסד הנתונים (`DataBase`).
    *   שימוש ב-`HashMap` לאחסון הנתונים (key-value).
    *   הגדרת `enum` לייצוג שגיאות אפשריות (`OperationError`).

3.  **בעלות והשאלות (Ownership & Borrowing)**:
    *   הבנה והבחנה ברורה בין סוגי `self`:
        *   `&self` (השאלה לקריאה בלבד): יושם בהצלחה ב-`read`.
        *   `&mut self` (השאלה עם הרשאת שינוי): יושם בהצלחה ב-`write` ו-`update`.
    *   הבנת הצורך ב-`let mut` כדי לקרוא למתודות שמשנות מצב.

4.  **פונקציות ומתודות**:
    *   הבחנה בין **פונקציות מקושרות** (Associated Functions) שאינן מקבלות `self` (כמו `new`) לבין **מתודות** (Methods) שכן.
    *   מימוש תבנית הבנאי (constructor pattern) עם `::new()`.

5.  **טיפול בתוצאות ושגיאות**:
    *   שימוש ב-`Option<T>` כדי לייצג ערך שיכול להיות חסר.
    *   שימוש ב-`Result<T, E>` כדי לייצג פעולה שיכולה להצליח או להיכשל.
    *   מימוש התבנית המתקדמת `Result<Option<T>, E>` ב-`read` כדי להבדיל בין "לא נמצא" לבין שגיאת מערכת.
    *   שימוש בטוח ב-`match` ו-`if let` כדי לטפל בתוצאות, והימנעות מ-`unwrap`.

6.  **רפרנסים ו-Dereferencing**:
    *   הבנת ההבדל בין רפרנס (`&String`) לערך (`String`).
    *   שימוש יעיל ב-`&String` כפרמטר לפונקציה כדי למנוע העתקות.
    *   הבנת השימוש ב-`*` (dereference) כדי לשנות ערך דרך רפרנס משתנה (`*val = ...`) במימוש של `update`.

## API הליבה שפותח

עד כה, מימשנו בהצלחה 3 מתוך 4 פעולות ה-CRUD:

*   **Create**: `fn write(&mut self, value: String) -> Result<u64, OperationError>`
*   **Read**: `fn read(&self, key: u64) -> Result<Option<&String>, OperationError>`
*   **Update**: `fn update(&mut self, key: u64, new_value: &String) -> Result<u64, OperationError>`

## סיכום ההישגים

בנית בהצלחה את ליבת מסד הנתונים, תוך הפגנת הבנה של כמה מהעקרונות המורכבים והחשובים ביותר ב-Rust. הקוד שכתבת הוא לא רק עובד, אלא גם אידיומטי, בטוח ויעיל.
